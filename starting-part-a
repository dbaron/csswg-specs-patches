From: L. David Baron <dbaron@dbaron.org>

Describe what the before-style and after-style are when considering whether to start a transition.

This implements part A of the proposal in
http://lists.w3.org/Archives/Public/www-style/2013Mar/0297.html
as resolved in
http://lists.w3.org/Archives/Public/www-style/2013Jun/0682.html

diff --git a/css-animations/Overview.html b/css-animations/Overview.html
--- a/css-animations/Overview.html
+++ b/css-animations/Overview.html
@@ -1,42 +1,45 @@
 <!DOCTYPE html>
 
 <html lang=en>
  <head>
   <title>CSS Animations</title>
-  <script src='http://test.csswg.org/harness/annotate.js#css-animations-1_dev' type='text/javascript' defer></script>
   <!--
   <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
   <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
   -->
 
   <meta content="CSS Animations" name=dcterms.title>
   <meta content=text name=dcterms.type>
-  <meta content=2013-05-06 name=dcterms.date>
+  <meta content=2013-09-06 name=dcterms.date>
   <meta content="L. David Baron" name=dcterms.creator>
   <meta content=W3C name=dcterms.publisher>
   <meta content="http://dev.w3.org/csswg/css3-animations/"
    name=dcterms.identifier>
+  <script defer=defer
+   src="http://test.csswg.org/harness/annotate.js#css-animations-1_dev"
+   type="text/javascript"></script>
   <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
   <link href="../default.css" rel=stylesheet type="text/css">
   <style type="text/css">
 		div.prod { margin: 1em 2em; }
 	</style>
   <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
    type="text/css">
 
  <body>
   <div class=head> <!--begin-logo-->
    <p><a href="http://www.w3.org/"><img alt=W3C height=48
     src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->
 
    <h1>CSS Animations</h1>
 
-   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 6 May 2013</h2>
+   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 6 September
+    2013</h2>
 
    <dl>
     <dt>This version:
 
     <dd><a
      href="http://dev.w3.org/csswg/css3-animations/">http://dev.w3.org/csswg/css3-animations/</a>
 
     <dt>Latest version:
@@ -91,17 +94,19 @@
     <dd><a
      href="mailto:www-style@w3.org?subject=%5Bcss-animations%5D%20feedback">www-style@w3.org</a>
      with subject line “<kbd>[css-animations] <var>… message topic
      …</var></kbd>” (<a
      href="http://lists.w3.org/Archives/Public/www-style/"
      rel=discussion>archives</a>)
 
     <dt>Test suite:
-	    <dd><a href="http://test.csswg.org/suites/css-animations-1/nightly-unstable/">http://test.csswg.org/suites/css-animations-1/nightly-unstable/</a>
+
+    <dd><a
+     href="http://test.csswg.org/suites/css-animations-1/nightly-unstable/">http://test.csswg.org/suites/css-animations-1/nightly-unstable/</a>
    </dl>
    <!--begin-copyright-->
    <p class=copyright><a
     href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
     rel=license>Copyright</a> © 2013 <a href="http://www.w3.org/"><abbr
     title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
     href="http://www.csail.mit.edu/"><abbr
     title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
@@ -1819,20 +1824,20 @@ interface CSSKeyframesRule : CSSRule {
 
   <dl class=bibliography>
    <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
     <!---->
 
    <dt id=CSS3VAL>[CSS3VAL]
 
    <dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a
-    href="http://www.w3.org/TR/2012/CR-css3-values-20120828/"><cite>CSS
-    Values and Units Module Level 3.</cite></a> 28 August 2012. W3C Candidate
+    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/"><cite>CSS
+    Values and Units Module Level 3.</cite></a> 30 July 2013. W3C Candidate
     Recommendation. (Work in progress.) URL: <a
-    href="http://www.w3.org/TR/2012/CR-css3-values-20120828/">http://www.w3.org/TR/2012/CR-css3-values-20120828/</a>
+    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/">http://www.w3.org/TR/2013/CR-css3-values-20130730/</a>
    </dd>
    <!---->
 
    <dt id=WCAG20>[WCAG20]
 
    <dd>Ben Caldwell; et al. <a
     href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/"><cite>Web Content
     Accessibility Guidelines (WCAG) 2.0.</cite></a> 11 December 2008. W3C
diff --git a/css-transitions/Overview.src.html b/css-transitions/Overview.src.html
--- a/css-transitions/Overview.src.html
+++ b/css-transitions/Overview.src.html
@@ -907,45 +907,105 @@ li:hover {
           'background-color' would have its new value (''green'') is ''2s'',
           so the transition from 'blue' to 'green' takes 2 seconds.
           However, when the list item leaves the :hover state, the
           transition from ''green'' to ''blue'' takes 1 second.
         </p>
       </div>
 
       <p>
-        When the computed value of a property changes, implementations
-        must start transitions based on the relevant item (see <a
+        Various things can cause the computed style of an element to change,
+        or for an element to start or stop having computed style.
+        (For the purposes of this specification,
+        an element has computed style when it is in the document tree,
+        and does not have computed style when it is not in the document tree.)
+        These include
+        insertion and removal of elements from the document tree
+        (which both changes whether those elements have computed styles and
+        can change the styles of other elements through selector matching),
+        changes to the document tree that cause
+        changes to which selectors match elements,
+        changes to style sheets or style attributes,
+        and other things.
+        This specification does not define when computed styles are updated.
+        However,
+        when an implementation updates the computed style for an element
+        to reflect one of these changes,
+        it must update the computed style for all elements to reflect all
+        of these changes at the same time
+        (or at least it must be undetectable that it was done at a
+        different time).
+        This processing of a set of simultaneous style changes is called a
+        <dfn>style change event</dfn>.
+        (Implementations typically have a <span>style change event</span> to
+        correspond with their desired screen refresh rate,
+        and when up-to-date computed style is needed
+        for a script API that depends on it.)
+      </p>
+
+      <p>
+        Since this specification does not define
+        when a <span>style change event</span> occurs,
+        and thus what changes to computed values are considered simultaneous,
+        authors should be aware that changing any of the transition
+        properties a small amount of time after making a change that
+        might transition can result in behavior that varies between
+        implementations, since the changes might be considered
+        simultaneous in some implementations but not others.
+      </p>
+
+      <p>
+        When a <span>style change event</span> occurs,
+        implementations must start transitions based on
+        the computed styles that changed in that event.
+        If an element does not have a computed style
+        either before or after the style change event,
+        then transitions are not started for that element
+        in that style change event.
+        Otherwise,
+        define the <span>before-change style</span> as
+        the computed style for the element as of
+        the previous <span>style change event</span>,
+        except with any styles derived from declarative
+        animations such as CSS Transitions, CSS Animations
+        ([[CSS3-ANIMATIONS]]),
+        and SMIL Animations ([[SMIL-ANIMATION]], [[SVG11]])
+        updated to the current time.
+        Likewise, define the <span>after-change style</span> as
+        the computed style for the element based on the information
+        known at the start of that <span>style change event</span>,
+        in other words,
+        excluding any changes resulting from CSS Transitions
+        that start during that <span>style change event</span>.
+      </p>
+
+      <p>
+        For each element with a <span>before-change style</span> and
+        an <span>after-change style</span>,
+        and each property (other than shorthands) for which
+        the <span>before-change style</span> is different from
+        the <span>after-change style</span>,
+        implementations must
+        start transitions based on the relevant item (see <a
         href="#transition-property">the definition of
         'transition-property'</a>) in the computed value of
         'transition-property'.
         Corresponding to this item there are
         computed values of 'transition-duration' and 'transition-delay'
         (see <a href="#list-matching">the rules on matching lists</a>).
         Define the <dfn>combined duration</dfn> of the transition
         as the sum of max('transition-duration', ''0s'') and 'transition-delay'.
         When the combined duration is greater than ''0s'',
         then a transition starts based on the values of
         'transition-duration', 'transition-delay',
         and 'transition-timing-function';
         in other cases transitions do not occur.
       </p>
 
       <p>
-        Since this specification does not define
-        when computed values change, and thus what changes to
-        computed values are considered simultaneous,
-        authors should be aware that changing any of the transition
-        properties a small amount of time after making a change that
-        might transition can result in behavior that varies between
-        implementations, since the changes might be considered
-        simultaneous in some implementations but not others.
-      </p>
-
-      <p>
         Once the transition of a property has started, it must continue
         running based on the original timing function, duration, and
         delay, even if the 'transition-timing-function',
         'transition-duration', or 'transition-delay' property changes
         before the transition is complete.  However, if the
         'transition-property' property changes such that the transition
         would not have started, the transition must stop (and the
         property must immediately change to its final value).
@@ -1553,16 +1613,20 @@ li:hover {
 dated 12 February 2013</a>:</p>
 
 <ul>
   <li>Fixed missed substitution (<span>TransitionEventInit</span> rather than AnimationEventInit) when copying event IDL from css3-animations.
   <li>Make naming of event constructor dictionary parameters more consistent with DOM-Level-3-Events.
   <li>Make the behavior of simultaneous changes of 'transition-*' properties and transitionable properties even clearer.
   <li>Computed Value line for shorthands should say "see individual properties".
   <li>Define initial values of event properties,  using initializers in <span>TransitionEventInit</span>.
+  <li>Define the model for starting of transitions and their interaction with other animations more precisely:
+    <ul>
+      <li>Define the <span>before-change style</span> and <span>after-change style</span> used for the style comparison, using the new concept of a <span>style change event</span>.
+    </ul>
 </ul>
 
 <p>For more details on these changes, see the version control change logs, which are split in two parts because of a file renaming: <a href="https://dvcs.w3.org/hg/csswg/log/tip/css-transitions/Overview.src.html">change log since 2013 March 28</a>, <a href="https://dvcs.w3.org/hg/csswg/log/tip/css3-transitions/Overview.src.html">change log before 2013 March 28</a>.
 
 <p>For changes in previous working drafts, see
 <a href="http://www.w3.org/TR/2013/WD-css3-transitions-20130212/ChangeLog">the ChangeLog</a>, and the above version control logs.</p>
 
 <h2 id="acknowledgments">Acknowledgments</h2>
